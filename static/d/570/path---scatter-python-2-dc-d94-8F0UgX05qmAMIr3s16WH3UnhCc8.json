{"data":{"site":{"siteMetadata":{"title":"100000","author":"Won Sunggyu"}},"markdownRemark":{"id":"fcfd0ec7-41f7-534a-9458-78ba1810c8c2","html":"<h2>실행환경</h2>\n<ul>\n<li><code class=\"language-text\">python</code> 명령행을 사용하면 별도의 그래프 창이 나타난다. 그래프가 동적으로 나타나지만 큰 데이타를 처리하지 못한다.</li>\n<li>\n<p><code class=\"language-text\">jupyter</code> 웹인터페이스를 사용하면 인라인 그래프가 나타난다. 이 그래프는 정적인 그래프이다.</p>\n<div class=\"gatsby-highlight\" data-language=\"bash\">\n      <pre class=\"language-bash\"><code class=\"language-bash\">python point_cloud_python.py </code></pre>\n      </div>\n</li>\n</ul>\n<h2>Annotation Centents</h2>\n<p>데이타를 선택했을 때 보여줄 정보의 내용을 생성한다. 여기서는 3 좌표의 값이다.</p>\n<div class=\"gatsby-highlight\" data-language=\"python\">\n      <pre class=\"language-python\"><code class=\"language-python\"><span class=\"token keyword\">def</span> <span class=\"token function\">update_annot</span><span class=\"token punctuation\">(</span>ind<span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span>\n    pos <span class=\"token operator\">=</span> sc<span class=\"token punctuation\">.</span>get_offsets<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">[</span>ind<span class=\"token punctuation\">[</span><span class=\"token string\">\"ind\"</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">[</span><span class=\"token number\">0</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">]</span>\n    annot<span class=\"token punctuation\">.</span>xy <span class=\"token operator\">=</span> pos\n    text <span class=\"token operator\">=</span> <span class=\"token string\">\"{}\\n{}\\n{}\"</span><span class=\"token punctuation\">.</span><span class=\"token builtin\">format</span><span class=\"token punctuation\">(</span><span class=\"token string\">'Lon=%7.3f'</span><span class=\"token operator\">%</span>x<span class=\"token punctuation\">[</span>ind<span class=\"token punctuation\">[</span><span class=\"token string\">\"ind\"</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">[</span><span class=\"token number\">0</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span> \n                               <span class=\"token string\">'Lat=%7.3f'</span><span class=\"token operator\">%</span>y<span class=\"token punctuation\">[</span>ind<span class=\"token punctuation\">[</span><span class=\"token string\">\"ind\"</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">[</span><span class=\"token number\">0</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span>\n                               <span class=\"token string\">'Dep=%7.3f'</span><span class=\"token operator\">%</span>z<span class=\"token punctuation\">[</span>ind<span class=\"token punctuation\">[</span><span class=\"token string\">\"ind\"</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">[</span><span class=\"token number\">0</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span>\n    annot<span class=\"token punctuation\">.</span>set_text<span class=\"token punctuation\">(</span>text<span class=\"token punctuation\">)</span>\n    <span class=\"token comment\"># annot.get_bbox_patch().set_facecolor(cmap(norm(c[ind[\"ind\"][0]])))</span>\n    annot<span class=\"token punctuation\">.</span>get_bbox_patch<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span>set_alpha<span class=\"token punctuation\">(</span><span class=\"token number\">0.4</span><span class=\"token punctuation\">)</span></code></pre>\n      </div>\n<h2><a href=\"https://stackoverflow.com/questions/10374930/matplotlib-annotating-a-3d-scatter-plot\">Annotation Control</a></h2>\n<p>데이타를 선택했을 때 그래프가 반응하도록 동작을 정의한다.</p>\n<div class=\"gatsby-highlight\" data-language=\"python\">\n      <pre class=\"language-python\"><code class=\"language-python\"><span class=\"token keyword\">def</span> <span class=\"token function\">onactive</span><span class=\"token punctuation\">(</span>event<span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span>\n    vis <span class=\"token operator\">=</span> annot<span class=\"token punctuation\">.</span>get_visible<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n    <span class=\"token keyword\">if</span> event<span class=\"token punctuation\">.</span>inaxes <span class=\"token operator\">==</span> ax<span class=\"token punctuation\">:</span>\n        cont<span class=\"token punctuation\">,</span> ind <span class=\"token operator\">=</span> sc<span class=\"token punctuation\">.</span>contains<span class=\"token punctuation\">(</span>event<span class=\"token punctuation\">)</span>\n        <span class=\"token keyword\">if</span> cont<span class=\"token punctuation\">:</span>\n            update_annot<span class=\"token punctuation\">(</span>ind<span class=\"token punctuation\">)</span>\n            annot<span class=\"token punctuation\">.</span>set_visible<span class=\"token punctuation\">(</span><span class=\"token boolean\">True</span><span class=\"token punctuation\">)</span>\n            fig<span class=\"token punctuation\">.</span>canvas<span class=\"token punctuation\">.</span>draw_idle<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n        <span class=\"token keyword\">else</span><span class=\"token punctuation\">:</span>\n            <span class=\"token keyword\">if</span> vis<span class=\"token punctuation\">:</span>\n                annot<span class=\"token punctuation\">.</span>set_visible<span class=\"token punctuation\">(</span><span class=\"token boolean\">False</span><span class=\"token punctuation\">)</span>\n                fig<span class=\"token punctuation\">.</span>canvas<span class=\"token punctuation\">.</span>draw_idle<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span></code></pre>\n      </div>\n<h2>Scatter 3D 모듈</h2>\n<div class=\"gatsby-highlight\" data-language=\"python\">\n      <pre class=\"language-python\"><code class=\"language-python\"><span class=\"token keyword\">from</span> mpl_toolkits<span class=\"token punctuation\">.</span>mplot3d <span class=\"token keyword\">import</span> Axes3D\n<span class=\"token keyword\">import</span> matplotlib<span class=\"token punctuation\">.</span>pyplot <span class=\"token keyword\">as</span> plt\n<span class=\"token keyword\">import</span> numpy <span class=\"token keyword\">as</span> np\n<span class=\"token keyword\">import</span> os</code></pre>\n      </div>\n<h2>Data 로딩</h2>\n<p>텍스트 데이타를 쉽게 읽을 수 있다. 변수 3개를 한번에 할당하기 위해서 배열을 전치시켰다. 데이타 수가 너무 많을 경우에 건너 뛰며 읽었다.</p>\n<div class=\"gatsby-highlight\" data-language=\"python\">\n      <pre class=\"language-python\"><code class=\"language-python\">os<span class=\"token punctuation\">.</span>chdir<span class=\"token punctuation\">(</span>r<span class=\"token string\">\"C:\\my_work\\webapp\\create-react-app\\point-cloud-python\"</span><span class=\"token punctuation\">)</span>\ndatafile<span class=\"token operator\">=</span><span class=\"token builtin\">open</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"geomap.txt\"</span><span class=\"token punctuation\">,</span><span class=\"token string\">'r'</span><span class=\"token punctuation\">)</span>\nxyz<span class=\"token operator\">=</span>np<span class=\"token punctuation\">.</span>loadtxt<span class=\"token punctuation\">(</span>datafile<span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span>transpose<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\nx<span class=\"token punctuation\">,</span>y<span class=\"token punctuation\">,</span>z<span class=\"token operator\">=</span>xyz<span class=\"token punctuation\">[</span><span class=\"token number\">0</span><span class=\"token punctuation\">:</span><span class=\"token number\">3</span><span class=\"token punctuation\">,</span><span class=\"token punctuation\">:</span><span class=\"token punctuation\">:</span><span class=\"token number\">100</span><span class=\"token punctuation\">]</span></code></pre>\n      </div>\n<h2>3D 그림판</h2>\n<p>그림판에 3차원 좌표축을 준비한다.</p>\n<div class=\"gatsby-highlight\" data-language=\"python\">\n      <pre class=\"language-python\"><code class=\"language-python\">fig <span class=\"token operator\">=</span> plt<span class=\"token punctuation\">.</span>figure<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\nax <span class=\"token operator\">=</span> fig<span class=\"token punctuation\">.</span>add_subplot<span class=\"token punctuation\">(</span><span class=\"token number\">111</span><span class=\"token punctuation\">,</span> projection<span class=\"token operator\">=</span><span class=\"token string\">'3d'</span><span class=\"token punctuation\">)</span>\nax<span class=\"token punctuation\">.</span>set_xlabel<span class=\"token punctuation\">(</span><span class=\"token string\">'Longitude'</span><span class=\"token punctuation\">)</span>\nax<span class=\"token punctuation\">.</span>set_ylabel<span class=\"token punctuation\">(</span><span class=\"token string\">'Latitude'</span><span class=\"token punctuation\">)</span>\nax<span class=\"token punctuation\">.</span>set_zlabel<span class=\"token punctuation\">(</span><span class=\"token string\">'Depth'</span><span class=\"token punctuation\">)</span>\n<span class=\"token comment\"># ax.view_init(elev=90, azim=-90) # 평면</span></code></pre>\n      </div>\n<h2>Scatter 3D</h2>\n<p>빨강-노랑-파랑 컬러맵을 사용하여 3차원 분포도를 그르고 컬러바를 추가한다.</p>\n<div class=\"gatsby-highlight\" data-language=\"python\">\n      <pre class=\"language-python\"><code class=\"language-python\">cm <span class=\"token operator\">=</span> plt<span class=\"token punctuation\">.</span>cm<span class=\"token punctuation\">.</span>get_cmap<span class=\"token punctuation\">(</span><span class=\"token string\">'RdYlBu'</span><span class=\"token punctuation\">)</span>\nsc <span class=\"token operator\">=</span> ax<span class=\"token punctuation\">.</span>scatter<span class=\"token punctuation\">(</span>x<span class=\"token punctuation\">,</span> y<span class=\"token punctuation\">,</span> z<span class=\"token punctuation\">,</span> s<span class=\"token operator\">=</span><span class=\"token number\">5</span><span class=\"token punctuation\">,</span> c<span class=\"token operator\">=</span>z<span class=\"token punctuation\">,</span> cmap<span class=\"token operator\">=</span>cm<span class=\"token punctuation\">,</span> marker<span class=\"token operator\">=</span><span class=\"token string\">'o'</span><span class=\"token punctuation\">,</span> alpha<span class=\"token operator\">=</span><span class=\"token number\">0.6</span><span class=\"token punctuation\">)</span>\n<span class=\"token comment\"># sc = ax.scatter(x, y, z, s=5, c=z, cmap=cm, marker='o', alpha=0.6, edgecolor='none')</span>\nplt<span class=\"token punctuation\">.</span>colorbar<span class=\"token punctuation\">(</span>sc<span class=\"token punctuation\">)</span></code></pre>\n      </div>\n<h2>Annotation View</h2>\n<p>데이타를 선택했을 때 보여줄 정보의 틀을 준비하고 초기값으로 보이지 않게 설정한다.</p>\n<div class=\"gatsby-highlight\" data-language=\"python\">\n      <pre class=\"language-python\"><code class=\"language-python\">annot <span class=\"token operator\">=</span> ax<span class=\"token punctuation\">.</span>annotate<span class=\"token punctuation\">(</span><span class=\"token string\">\"\"</span><span class=\"token punctuation\">,</span> xy<span class=\"token operator\">=</span><span class=\"token punctuation\">(</span><span class=\"token number\">0</span><span class=\"token punctuation\">,</span><span class=\"token number\">0</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span> xytext<span class=\"token operator\">=</span><span class=\"token punctuation\">(</span><span class=\"token number\">20</span><span class=\"token punctuation\">,</span><span class=\"token number\">20</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>textcoords<span class=\"token operator\">=</span><span class=\"token string\">\"offset points\"</span><span class=\"token punctuation\">,</span>\n                    bbox<span class=\"token operator\">=</span><span class=\"token builtin\">dict</span><span class=\"token punctuation\">(</span>boxstyle<span class=\"token operator\">=</span><span class=\"token string\">\"round\"</span><span class=\"token punctuation\">,</span> fc<span class=\"token operator\">=</span><span class=\"token string\">\"w\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\n                    arrowprops<span class=\"token operator\">=</span><span class=\"token builtin\">dict</span><span class=\"token punctuation\">(</span>arrowstyle<span class=\"token operator\">=</span><span class=\"token string\">\"->\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span>\nannot<span class=\"token punctuation\">.</span>set_visible<span class=\"token punctuation\">(</span><span class=\"token boolean\">False</span><span class=\"token punctuation\">)</span></code></pre>\n      </div>\n<h2>Annotation Event</h2>\n<p>데이타를 선택하는 이벤트를 결정한다.</p>\n<table>\n<thead>\n<tr>\n<th align=\"center\">마우스</th>\n<th align=\"center\">클릭</th>\n<th align=\"center\">호버링</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td align=\"center\">이벤트</td>\n<td align=\"center\">button<em>press</em>event</td>\n<td align=\"center\">motion<em>notify</em>event</td>\n</tr>\n</tbody>\n</table>\n<div class=\"gatsby-highlight\" data-language=\"python\">\n      <pre class=\"language-python\"><code class=\"language-python\">fig<span class=\"token punctuation\">.</span>canvas<span class=\"token punctuation\">.</span>mpl_connect<span class=\"token punctuation\">(</span><span class=\"token string\">'button_press_event'</span><span class=\"token punctuation\">,</span> onactive<span class=\"token punctuation\">)</span>\n<span class=\"token comment\"># fig.canvas.mpl_connect(\"motion_notify_event\", onactive)</span></code></pre>\n      </div>\n<h2>그림판 보이기</h2>\n<div class=\"gatsby-highlight\" data-language=\"python\">\n      <pre class=\"language-python\"><code class=\"language-python\">plt<span class=\"token punctuation\">.</span>show<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span></code></pre>\n      </div>\n<h2>출력물</h2>\n<p><img src=\"https://github.com/five2nine/geomap/blob/master/scatter-python.png?raw=true\" alt=\"point-cloud-python\"></p>","excerpt":"실행환경  명령행을 사용하면 별도의 그래프 창이 나타난다. 그래프가 동적으로 나타나지만 큰 데이타를 처리하지 못한다.  웹인터페이스를 사용하면 인라인 그래프가 나타난다. 이 그래프는 정적인 그래프이다. Annotation Centents…","frontmatter":{"title":"python scatter 함수를 사용하여 지형 그리기","date":"2018-09-15","tags":["anaconda","python","scatter","geometry"],"keywords":["anaconda","python","scatter","geometry"]}}},"pageContext":{"slug":"/scatter-python/","previous":{"fields":{"slug":"/anaconda-not-working/"},"frontmatter":{"title":"Anaconda가 작동하지 않을 때","tags":["anaconda","error"],"published":true}},"next":{"fields":{"slug":"/matlab-dlmwrite/"},"frontmatter":{"title":"matlab dlmwrite 함수로 행렬 쓰기","tags":["matlab","iostream"],"published":true}}}}